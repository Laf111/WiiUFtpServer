======================================================================================================
> WiiUFtpServer
======================================================================================================

FTP server based on libWUT and libIOSUHAX. 
It fixes remaining files injection failures when using ftp-everywhere (such as saves for WWHD*).

Comes with all necessary files (emebeded libWut and compile sources of libIOSUHAX). 
No dependencies to set.

The build process creates : HBL app + WUP package (to install it on the Wii-U menu as a channel)

* Few games such as WWHD check the save files'rights and refuse to import them if permissions rights are not set using IOSUHAX_FSA_ChangeMode.

======================================================================================================
BUILD : (i used Windows)

Install devkitPro (in DEVKITPRO_PATH)
Launch "msys2\msys2_shell.bat"
export DEVKITPRO=$DEVKITPRO_PATH
cd WiiUFtpServer
./build.sh

======================================================================================================
HISTORY : 

2021/04/05 V1-0 : 
    > Increase bandwith by 30%
    > Set files timestamp to OStime instead of J1970
  
2021/04/22 V1-1 : 
    > Change rights on the files received : fix files injection (saves for WWD for example)
    > Increase bandwith by 50%

2021/04/22 V1-2 : 
    > Try to fix timestamps with a date offset
      time_t seems to be a long double timestamp with micro-seconds based on epoch 1980
      The following code return "floating-point type"
        if ((time_t)-1 > 0) {
            // time_t is an unsigned type
        }
        else if ((time_t)1 / 2 > 0) {
            // time_t is a signed integer type
        }
        else {
            // time_t is a floating-point type (I've never seen this)
        }                 
    > set version and date in meta.xml when building

2021/05/01 V2 : 
    > Fix channel creation (WUP package)
    > build.sh patch version and date in all xml files
    > remove debug code in main.c

2021/05/06 V2-1 : 
    > chmod also folder created by the client
    > [Request #1] Support for other controllers than gamepad
    
2021/05/09 V2-2 : 
    > fix regression : can't exit HBL version
      HBL : gamePad, wiiMote +? : OK
      HBC : only gamePad

2021/05/09 V3 : 
    > fix timestamps on files and folders

2021/05/18 V3-1 : 
    > always retry on transfert error
    > +15% on network speed by setting a max priority to the thread and 
      MAX_NET_BUFFER_SIZE to 512k

2021/05/28 V3-2 : Enhance display log on server side, multithreading just for the fun... (bottleneck is on network socket not on CPU), 
                  a real progress should be a SSL server using lib curl (should be more efficient than using select() for FTP sockets as 
                  the code is already asynchronous I/O)
    > remove unecessary characters from the logged line (shorter the line)
    > use default thread on CPU2 for the ftp serveur (priority 1)
    > set network connections on CPU0 (priority 0)
    > main process is launched (as usual) on the default thread of CPU1
    
2021/06/01 V4-0 :    
    > fix ip adress not shown

2021/06/07 V4-1 :    
    > feedback on settings
    > set max concurents connections to 32
    > fix bad version number shown in 4.0
    
2021/06/10 V4-2 :    
    > create a gitHub branch for the HBL version based on first version of dynamic_libs that gives a greater socket bandwith 
      almost 30% more than using the WUT API.
      This version will replace the HBL version in the future release (channel version is still based on libWUT)

2021/07/23 V4-3 :    
    > put the 2 codes in the same project :
        - version using dynamic libs for HBL (best bandwith ~40% faster than WUT version)
        - building channel using the WUT version
    > rename WUP package name to WiiuFtpServer

2021/08/05 V4-4 :    
    > fix regression caused by setvbuf (saves was corrupted because of unexpected behavior due to freeing buffer 
      before fclose on file)
    > disable Nagle (socket optimisation)

2021/08/07 V4-5 :    
    > increase bandwith by 240% by setting buffer optimization specifically to RCV/SND file sockets

2021/08/08 V5 :    
    > get extra KB/s by lowering more default socket buffers
    > finalize and merge dynlib / wut codes (WUT version gain 20% of bandwith)
    > fix issue when disconnecting/stop server (dynlibs)

2021/08/12 V5-1 :    
    > now allow simultaneous tranfers also for upload (client -> server)
    > restore FTP thread (fixing v4-5 issue)
    > fix to 1 client max with 6 connections max
    > add a socket optimization : Suppress delayed ACKs
    > bring the channel version transferts speeds close to the HBL one

2021/09/01 V5-2 :    
    > mount NAND paths ONLY if asked (by pressing B) : a very good idea from Masana@GBATemp, thanks!!!
    > if auto shudown feature is enabled, pressing DOWN toggle the feature OFF/ON
    > add a verbose mode for server log (disable by default) that can be activated by pressing UP
    > longer value for internal timeout to avoid data transfer deconnexions
    > only 1 simultaneous tranfers for up/download (fix deconnexion issues)
    > WUT is now also used for HBL version (since now it performs like dynamic libs one)
    > add some socket optimizations : 
        - Leave received OOB data in line (SO_OOBINLINE)
        - Disable slow start feature (SO_NOSLOWSTART)
        - Socket memory optimization (thanks to V10lator@GBATemp for your support!!!) 
     > now channel version exit to Wii-u Menu 

2021/09/02 V6 :    
    > fix a display issue when exit (missing a draw call)
    > + 10% speed (UL/DL) with using a double sized buffer (corresponding to the size
      really allocated by the system when using setsockopt on SO_RCVBUF & SO_SNDBUF)
